---
title: "R Notebook"
output: html_notebook
---

```{r}
csv <- paste0("~/Downloads/graduation", c(".csv", " (1).csv", " (2).csv", " (3).csv")) %>%
  map(~read_csv(., skip = 5, na = c("", "*", "NA", "N/A"), col_types = cols(.default = "c")))
```

```{r}
csv[[3]]$`Race/Ethnicity` <- "All"
csv[[4]]$`Race/Ethnicity` <- "All"
csv[[2]]$`District Code` <- NULL
csv[[3]]$`District Code` <- NULL
```

```{r}
grad <- bind_rows(csv) %>%
  setNames(c("name", "race", "2012", "2013", "2014", "2015", "2016")) %>%
  gather(key = year, value = rate, -name, -race) %>%
  filter(race %in% c("All", "White", "Black", "Hispanic")) %>%
  mutate(name = as.factor(name) %>% forcats::fct_recode(CT = "State of Connecticut", NHPS = "New Haven School District")) %>%
  mutate(rate = as.numeric(rate) / 100)

write_csv(grad, "graduation rates.csv")
```

